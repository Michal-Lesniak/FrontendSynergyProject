<div class="h-screen">
    <app-header></app-header>
    <div class="grid grid-cols-5 grid-rows-4 h-[80%] p-12 gap-3">
        <div class="col-span-3 row-span-1 shadow rounded grid grid-cols-4">
            <div class="col-span-2 flex flex-col justify-center m-5">
                <label>Name Budget</label>
                <input class="border rounded p-1" [(ngModel)]="nameVersion" (ngModelChange)="addVersionNameToSessionStorage()" placeholder="Version 1" />
            </div>
            <div class="col-span-1 flex flex-col justify-center m-2">
                <label>Planned Budget(e)</label>
                <input class="border rounded p-1" [(ngModel)]="integrationBudget" (ngModelChange)="updateValuesByBudget(); addIntegrationBudgetToSessionStorage()" placeholder="50000" />
            </div>
            <div class="col-span-1 flex flex-col justify-center m-2 mr-5">
                <label>No. Participants</label>
                <input class="border rounded p-1" [(ngModel)]="noParticipant" (ngModelChange)="addIntegrationNoParticipantToSesstionStorage()" placeholder="59" />
            </div>
        </div>
        <div class="col-span-2 row-span-4 shadow rounded flex flex-col p-8">
           <div class="font-bold text-xl px-5">Info & Photo</div>
           
            <input class="p-5 border rounded m-5 flex flex-col" [(ngModel)]="integrationName" (ngModelChange)="addIntegrationNameToSessionStorage()" matInput placeholder="Integration 2023">
            <button class="flex-1 bg-purple-900/20 rounded m-5" >
                <div class="h-[70%] flex items-center justify-center">
                    <mat-icon class="scale-[7] text-white">cloud_upload</mat-icon>
                </div>
                <div>Click to upload or drag&drop</div>
            </button>
        </div>
        <div class="col-span-3 row-span-3 shadow rounded h-full flex flex-col">
            <div class="font-bold text-xl p-3">Expenses</div>
            <div class="flex-1 overflow-y-scroll">
                <table mat-table [dataSource]="listCategory!">
                    <ng-container matColumnDef="Category">
                        <th mat-header-cell *matHeaderCellDef>Category</th>
                        <td mat-cell *matCellDef="let element">{{element.name}}</td>
                    </ng-container>
                    <ng-container matColumnDef="Amount">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element">{{element.fullCost}}</td>
                    </ng-container>
                    <ng-container matColumnDef="Percent">
                        <th mat-header-cell *matHeaderCellDef>Percent</th>
                        <td mat-cell *matCellDef="let element">{{element.spendPercentOfBudgetCategory}}</td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColums"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColums"></tr>"
                </table>
            </div>
            <div class="h-[30%] p-5" *ngIf="showAddingCategory">
                <h2 class="pl-5">New Category</h2>
                <div class="grid grid-cols-4">
                    <div class="flex flex-col m-5">
                        <label>Name</label>
                        <input class="border rounded p-1" [(ngModel)]="nameCategory"  type="text" placeholder="Ex. Hotel">
                    </div>
                    <div class="flex flex-col m-5">
                        <label>Percent</label>
                        <input class="border rounded p-1" [(ngModel)]="percentCategory"  type="text" placeholder="Ex. 50%">
                    </div>
                    <div class="flex flex-col m-5">
                        <label>Amount</label>
                        <input class="border rounded p-1" [(ngModel)]="amountCategory"  type="text" placeholder="Ex. 20000">
                    </div>
                    <div class="flex items-end justify-center m-5">
                        <button (click)="addCategory()" class="px-5 py-2 rounded border hover:bg-purple-900/20">Add</button>
                    </div>
                    
                </div>
            </div>
            <div class="align-end border-t p-3">
                <button class="pr-2">+</button>
                <button (click)="showAddingCategory=!showAddingCategory;">Dodaj nową kategorię</button>
            </div>
            
        </div>
       
    </div>
    <div class="flex justify-between mt-3">
        <button routerLink="/home" class=" ml-12 p-3 rounded bg-purple-900/80 text-white flex items-center" ><mat-icon class="text-white">navigate_before</mat-icon>Back</button>
        <button routerLink="/integration/details" (click)="createIntegration()" class=" mr-12 p-3 rounded bg-purple-900/80 text-white flex items-center" >Create<mat-icon class="text-white">navigate_next</mat-icon></button>
    </div>
</div>
